const BASE_URL = "https://freedicemaster.laflys.com", CLIENT_ID = "3074457347661918546", images = [{ src: "img/des/1d4.svg", width: 60, height: 60, alt: "1d4", nombreDes: 1, typeDes: 4 }, { src: "img/des/2d4.svg", width: 60, height: 60, alt: "2d4", nombreDes: 2, typeDes: 4 }, { src: "img/des/3d4.svg", width: 60, height: 60, alt: "3d4", nombreDes: 3, typeDes: 4 }, { src: "img/des/4d4.svg", width: 60, height: 60, alt: "4d4", nombreDes: 4, typeDes: 4 }, { src: "img/des/1d6.svg", width: 60, height: 60, alt: "1d6", nombreDes: 1, typeDes: 6 }, { src: "img/des/2d6.svg", width: 60, height: 60, alt: "2d6", nombreDes: 2, typeDes: 6 }, { src: "img/des/3d6.svg", width: 60, height: 60, alt: "3d6", nombreDes: 3, typeDes: 6 }, { src: "img/des/4d6.svg", width: 60, height: 60, alt: "4d6", nombreDes: 4, typeDes: 6 }, { src: "img/des/1d8.svg", width: 60, height: 60, alt: "1d8", nombreDes: 1, typeDes: 8 }, { src: "img/des/2d8.svg", width: 60, height: 60, alt: "2d8", nombreDes: 2, typeDes: 8 }, { src: "img/des/3d8.svg", width: 60, height: 60, alt: "3d8", nombreDes: 3, typeDes: 8 }, { src: "img/des/4d8.svg", width: 60, height: 60, alt: "4d8", nombreDes: 4, typeDes: 8 }, { src: "img/des/1d10.svg", width: 60, height: 60, alt: "1d10", nombreDes: 1, typeDes: 10 }, { src: "img/des/2d10.svg", width: 60, height: 60, alt: "2d10", nombreDes: 2, typeDes: 10 }, { src: "img/des/3d10.svg", width: 60, height: 60, alt: "3d10", nombreDes: 3, typeDes: 10 }, { src: "img/des/4d10.svg", width: 60, height: 60, alt: "4d10", nombreDes: 4, typeDes: 10 }, { src: "img/des/1d12.svg", width: 60, height: 60, alt: "1d12", nombreDes: 1, typeDes: 12 }, { src: "img/des/2d12.svg", width: 60, height: 60, alt: "2d12", nombreDes: 2, typeDes: 12 }, { src: "img/des/3d12.svg", width: 60, height: 60, alt: "3d12", nombreDes: 3, typeDes: 12 }, { src: "img/des/4d12.svg", width: 60, height: 60, alt: "4d12", nombreDes: 4, typeDes: 12 }, { src: "img/des/1d20.svg", width: 60, height: 60, alt: "1d20", nombreDes: 1, typeDes: 20 }, { src: "img/des/2d20.svg", width: 60, height: 60, alt: "2d20", nombreDes: 2, typeDes: 20 }, { src: "img/des/3d20.svg", width: 60, height: 60, alt: "3d20", nombreDes: 3, typeDes: 20 }, { src: "img/des/4d20.svg", width: 60, height: 60, alt: "4d20", nombreDes: 4, typeDes: 20 }, { src: "img/des/1d100.svg", width: 60, height: 60, alt: "1d100", nombreDes: 1, typeDes: 100 }, { src: "img/des/2d100.svg", width: 60, height: 60, alt: "2d100", nombreDes: 2, typeDes: 100 }, { src: "img/des/3d100.svg", width: 60, height: 60, alt: "3d100", nombreDes: 3, typeDes: 100 }, { src: "img/des/4d100.svg", width: 60, height: 60, alt: "4d100", nombreDes: 4, typeDes: 100 }]; async function versionOne(e) { let t = `( ${e.jetResult.join(" + ")} )`, s = ""; s += `Dés\n${e.lancer}\n\n`, s += `Valeurs\n${t}\n\n`, s += `Résultat\n${e.sumResult}`, await miro.board.widgets.create({ type: "sticker", x: e.x, y: e.y, text: s, scale: 2.5, capabilities: { editable: !1 }, style: { stickerType: 0, textAlign: "c" } }) } function getById(e) { return document.getElementById(e) } function sumDice(e, t) { return e + t } function stickerGet(e) { return { type: "sticker", metadata: { [CLIENT_ID]: { user: e } } } } function widgetsGet(e) { return miro.board.widgets.get(e) } function objRoll(e) { const t = e; e.lancer = `${e.nombreDes}d${e.typeDes}`; const s = []; for (let t = 0; t < e.nombreDes; t++) { let t = Math.floor(Math.random() * e.typeDes + 1); s.push(t) } e.jetResult = s, e.sumResult = e.jetResult.reduce(sumDice), console.log(t), versionOne(t) } function getImage(e) { return `<div class="draggable-item image-box">\n            <img src="${e.src}" alt="${e.alt}" onClick="rollClick(${e.nombreDes},${e.typeDes})">\n            </div>` } function addImages(e) { e.innerHTML += images.map(e => getImage(e)).join("") } async function rollClick(e, t) { jetDes = { nombreDes: Math.floor(e), typeDes: Math.floor(t) }; const s = await miro.board.viewport.get(), d = s.x + s.width / 2, i = s.y + s.height / 2; jetDes.x = d, jetDes.y = i, objRoll(jetDes) } function bootstrap() { addImages(document.getElementById("container")) } miro.onReady(bootstrap);
